{
    "collab_server" : "",
    "contents" : "library(dplyr)\nlibrary(trendct)\nlibrary(tidyr)\ndems <- read.csv(\"ct2008demsprimary.csv\", stringsAsFactors=FALSE)\n\nreps <- read.csv(\"ct2008repsprimary.csv\", stringsAsFactors=FALSE)\n\n\ndems$Turnout <- gsub(\"%\", \"\", dems$Turnout)\ndems$Turnout <- as.numeric(dems$Turnout)\nparty <- subset(dems, Turnout>50)\n\nreps$Turnout <- gsub(\"%\", \"\", reps$Turnout)\nreps$Turnout <- as.numeric(reps$Turnout)\n\nparty <- subset(reps, Turnout>50)\nturnout <- dems[c(\"Town\", \"Turnout\")]\ncolnames(turnout) <- c(\"Town\", \"Democratic\")\n\nrep_turnout <- reps[c(\"Town\", \"Turnout\")]\ncolnames(rep_turnout) <- c(\"Town\", \"Republican\")\n\nturnout <- left_join(turnout, rep_turnout)\n\nturnout$Democratic <- gsub(\"%\", \"\", turnout$Democratic)\nturnout$Republican <- gsub(\"%\", \"\", turnout$Republican)\n\nturnout$Democratic <- as.numeric(turnout$Democratic)\nturnout$Republican <- as.numeric(turnout$Republican)\n\ntrendmap(turnout, headline=\"2008 Presidential primaries voter turnout\", subhead=\"Out of percent party registrations.\",\n         src=\"Office of the Secretary of the State\", byline=\"Andrew Ba Tran/TrendCT.org\", url_append=\"date\", shape=\"towns\", color=\"yellow-red\")\n\n\ndem_vote <- dems[c(\"Town\", \"Obama\", \"Clinton\", \"Voted\")]\ndem_vote$percent_obama <- round(dem_vote$Obama / dem_vote$Voted*100,2)\ndem_vote$percent_clinton <- round(dem_vote$Clinton / dem_vote$Voted*100,2)\n\ndem_vote <- dem_vote[c(\"Town\", \"percent_obama\", \"percent_clinton\")]\ncolnames(dem_vote) <- c(\"Town\", \"Obama\", \"Clinton\")\n\ntrendmap(dem_vote, headline=\"Percent of Obama and Clinton votes by town\", subhead=\"Out of those who voted.\",\n         src=\"Office of the Secretary of the State\", byline=\"Andrew Ba Tran/TrendCT.org\", url_append=\"date\", shape=\"towns\", color=\"blues\")\n\n\n\n\n\n\nrep_vote <- reps[c(\"Town\", \"Romney\", \"McCain\", \"Huckabee\", \"Voted\")]\nrep_vote$percent_romney <- round(rep_vote$Romney / rep_vote$Voted*100,2)\nrep_vote$percent_mccain <- round(rep_vote$McCain / rep_vote$Voted*100,2)\nrep_vote$percent_huckabee <- round(rep_vote$Huckabee / rep_vote$Voted*100,2)\nrep_vote <- rep_vote[c(\"Town\", \"percent_romney\", \"percent_mccain\", \"percent_huckabee\")]\n\ncolnames(rep_vote) <- c(\"Town\", \"Romney\", \"McCain\", \"Huckabee\")\n\ntrendmap(rep_vote, headline=\"Percent of Republican primary votes by candidate\", subhead=\"Out of those who voted.\",\n         src=\"Office of the Secretary of the State\", byline=\"Andrew Ba Tran/TrendCT.org\", url_append=\"date\", shape=\"towns\", color=\"yellow-red\")\n\nromney <- subset(rep_vote, (Romney > McCain) & (Romney > Huckabee))\nmccain <- subset(rep_vote, (McCain > Romney) & (McCain > Huckabee))\n\n\nvoters <- read.csv(\"ACTIVE_VOTER_BY_TOWN_PARTY_040716.csv\", stringsAsFactors=FALSE)\nvoters$Affiliation <- gsub(\" .*\", \"\", voters$Affiliation)\n\nvoters <- spread(voters, Affiliation, Registered)\nvoters <- data.frame(voters)\n\ncolnames(voters) <- c(\"Town\", \"dem2016\", \"rep2016\", \"un2016\")\n\nvoters$un2016 <- NULL\n\nturnout2d <- dems[c(\"Town\", \"Active.Democratic.Enrollment.List\")]\nturnout2r <- reps[c(\"Town\", \"Active.Republican.Enrollment.List\")]\n\nturnout3 <- left_join(turnout2d, turnout2r)\nturnout3 <- left_join(turnout3, voters)\n\nturnout$dem2016 <- turnout3$dem2016-turnout3$Active.Democratic.Enrollment.List\nturnout$rep2016 <- turnout3$rep2016-turnout3$Active.Republican.Enrollment.List\n\nturnout_diff <- turnout[c(\"Town\", \"dem2016\", \"rep2016\")]\ncolnames(turnout_diff) <- c(\"Town\", \"Democrats\", \"Republicans\")\ntrendmap(turnout_diff, headline=\"Where party registrations changed since 2008\", subhead=\"\",\n         src=\"Office of the Secretary of the State\", byline=\"Andrew Ba Tran/TrendCT.org\", url_append=\"date\", shape=\"towns\", color=\"purple-green\")\n",
    "created" : 1461598758729.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2269955130",
    "id" : "7C079D1E",
    "lastKnownWriteTime" : 1461612903,
    "last_content_update" : 1461612903383,
    "path" : "~/Documents/Github/trendct-data/2016/04/ct-primaries-2008/analysis.R",
    "project_path" : "analysis.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}